<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>📋 Chapter 3: Connect your Project to an API | Vue Vixens Workshops</title>
    <meta name="description" content="Workshops preparados para ensinar desenvolvimento web e mobile com Vue.js para iniciantes">
    
    
    <link rel="preload" href="/docs/assets/css/styles.d3db7bc6.css" as="style"><link rel="preload" href="/docs/assets/js/app.d3db7bc6.js" as="script"><link rel="preload" href="/docs/assets/js/14.8ed1301d.js" as="script"><link rel="prefetch" href="/docs/assets/css/26.styles.3dd7acd6.css"><link rel="prefetch" href="/docs/assets/css/7.styles.1b4e6450.css"><link rel="prefetch" href="/docs/assets/js/1.c0a1f13a.js"><link rel="prefetch" href="/docs/assets/js/10.6b4cd686.js"><link rel="prefetch" href="/docs/assets/js/11.138c9a9c.js"><link rel="prefetch" href="/docs/assets/js/12.66209dca.js"><link rel="prefetch" href="/docs/assets/js/13.fb2c8053.js"><link rel="prefetch" href="/docs/assets/js/15.37c96ab4.js"><link rel="prefetch" href="/docs/assets/js/16.fb0b4103.js"><link rel="prefetch" href="/docs/assets/js/17.c1b7bbb0.js"><link rel="prefetch" href="/docs/assets/js/18.21a2e823.js"><link rel="prefetch" href="/docs/assets/js/19.103ff668.js"><link rel="prefetch" href="/docs/assets/js/2.106731d4.js"><link rel="prefetch" href="/docs/assets/js/20.d77fa14b.js"><link rel="prefetch" href="/docs/assets/js/21.a403bc71.js"><link rel="prefetch" href="/docs/assets/js/22.55395d5d.js"><link rel="prefetch" href="/docs/assets/js/23.5e4896f2.js"><link rel="prefetch" href="/docs/assets/js/24.059fc635.js"><link rel="prefetch" href="/docs/assets/js/25.ea5a6c79.js"><link rel="prefetch" href="/docs/assets/js/26.3dd7acd6.js"><link rel="prefetch" href="/docs/assets/js/27.857f1ae0.js"><link rel="prefetch" href="/docs/assets/js/28.dc90ca16.js"><link rel="prefetch" href="/docs/assets/js/29.29949648.js"><link rel="prefetch" href="/docs/assets/js/3.9e7db0d8.js"><link rel="prefetch" href="/docs/assets/js/30.4bf084dc.js"><link rel="prefetch" href="/docs/assets/js/31.d2734155.js"><link rel="prefetch" href="/docs/assets/js/32.581bd301.js"><link rel="prefetch" href="/docs/assets/js/4.ed48970e.js"><link rel="prefetch" href="/docs/assets/js/5.a75a5148.js"><link rel="prefetch" href="/docs/assets/js/6.aada1f9b.js"><link rel="prefetch" href="/docs/assets/js/7.1b4e6450.js"><link rel="prefetch" href="/docs/assets/js/8.b8442599.js"><link rel="prefetch" href="/docs/assets/js/9.8b154abd.js">
    <link rel="stylesheet" href="/docs/assets/css/26.styles.3dd7acd6.css"><link rel="stylesheet" href="/docs/assets/css/7.styles.1b4e6450.css"><link rel="stylesheet" href="/docs/assets/css/styles.d3db7bc6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/pt_br/" class="home-link router-link-active"><!----> <span class="site-name">Vue Vixens Workshops</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/pt_br/" class="nav-link">Página Inicial</a></div><div class="nav-item"><a href="http://www.vuevixens.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Time
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/docs/pt_br/workshop/CODE_OF_CONDUCT.html" class="nav-link">Código de Conduta</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/workshop/ch3.html" class="nav-link">en-US</a></li><li class="dropdown-item"><!----> <a href="/docs/pt_br/workshop/ch3.html" class="nav-link router-link-exact-active router-link-active">pt-BR</a></li></ul></div></div> <a href="https://github.com/vuevixens/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/pt_br/" class="nav-link">Página Inicial</a></div><div class="nav-item"><a href="http://www.vuevixens.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Time
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/docs/pt_br/workshop/CODE_OF_CONDUCT.html" class="nav-link">Código de Conduta</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/workshop/ch3.html" class="nav-link">en-US</a></li><li class="dropdown-item"><!----> <a href="/docs/pt_br/workshop/ch3.html" class="nav-link router-link-exact-active router-link-active">pt-BR</a></li></ul></div></div> <a href="https://github.com/vuevixens/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/docs/pt_br/workshop/" class="sidebar-link">Sobre os Workshops Vue Vixens</a></li><li><a href="/docs/pt_br/workshop/ch1.html" class="sidebar-link">🐶 Capítulo 1: Apresentando a &quot;My Pet Shop Web App&quot;</a></li><li><a href="/docs/pt_br/workshop/ch2.html" class="sidebar-link">🐶 Capítulo 2: Construindo uma galeria de pets</a></li><li><a href="/docs/pt_br/workshop/ch3.html" class="active sidebar-link">🐶 Capítulo 3: Conectando seu projeto a uma API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/pt_br/workshop/ch3.html#instrucoes" class="sidebar-link">Instruções</a></li><li class="sidebar-sub-header"><a href="/docs/pt_br/workshop/ch3.html#adicionando-o-axios" class="sidebar-link">Adicionando o Axios</a></li><li class="sidebar-sub-header"><a href="/docs/pt_br/workshop/ch3.html#chamando-a-api" class="sidebar-link">Chamando a API</a></li><li class="sidebar-sub-header"><a href="/docs/pt_br/workshop/ch3.html#use-a-api-1-substitua-alguns-dos-dados-estaticos" class="sidebar-link">Use a API 1 - Substitua alguns dos dados estáticos</a></li><li class="sidebar-sub-header"><a href="/docs/pt_br/workshop/ch3.html#use-a-api-2-randomize-as-imagens" class="sidebar-link">Use a API 2 - Randomize as Imagens</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="📋-chapter-3-connect-your-project-to-an-api"><a href="#📋-chapter-3-connect-your-project-to-an-api" aria-hidden="true" class="header-anchor">#</a> 📋 Chapter 3: Connect your Project to an API</h1> <table><thead><tr><th><strong>Objetivo do projeto</strong></th> <th>Aprender como uma API funciona e como usar em nosso projeto.</th></tr></thead> <tbody><tr><td><strong>O que você irá aprender</strong></td> <td>Usando a <a href="https://dog.ceo/dog-api/" target="_blank" rel="noopener noreferrer">DogCEO API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, você irá carregar imagens de cães dinamicamente, ao invés de usar dados falsos.</td></tr> <tr><td><strong>Ferramentas que você irá usar</strong></td> <td>Um navegador moderno como o Google Chrome. Caso esteja usando o Chrome, instale a extensão Vue.js DevTools. Uma conta em CodeSandbox.io.</td></tr> <tr><td><strong>Tempo estimado</strong></td> <td>1 hora</td></tr></tbody></table> <h2 id="instrucoes"><a href="#instrucoes" aria-hidden="true" class="header-anchor">#</a> Instruções</h2> <p>Se você precisar reiniciar seu projeto, clone <a href="https://github.com/VueVixens/projects/tree/master/chapter-1-end" target="_blank" rel="noopener noreferrer">este repositório<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> no Code Sandbox após efetuar o login.</p> <p>Até agora, colocamos imagens de cães em nossas telas por meio de alguns dados JSON estáticos que importamos para um componente. Isso é ótimo para fins de demonstração, mas na vida real, você quase sempre criará aplicativos da Web que consomem dados reais provenientes de suas próprias fontes de dados, ou externamente, de algum lugar da Internet. Vamos aprender a consumir dados de terceiros.</p> <p>Para realizar chamadas de API, precisaremos de uma biblioteca chamada <a href="https://github.com/axios/axios" target="_blank" rel="noopener noreferrer">axios<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. É um cliente HTTP baseado em <a href="https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer">Promises<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> que funciona no navegador e em um ambiente node.js.</p> <p>::: dica 💡
Originalmente, o Vue tinha sua própria maneira de fazer chamadas API usando ajax mas esse recurso foi preterido, pois a biblioteca independente do Axios funcionou muito bem para esse propósito, eliminando a necessidade de uma solução integrada. Leia mais sobre esta decisão <a href="https://medium.com/the-vue-point/retiring-vue-resource-871a82880af4" target="_blank" rel="noopener noreferrer">aqui<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
:::</p> <h2 id="adicionando-o-axios"><a href="#adicionando-o-axios" aria-hidden="true" class="header-anchor">#</a> Adicionando o Axios</h2> <p>Primeiro, adicione a biblioteca do Axios às dependências do seu projeto. Para fazer isso no Code Sandbox, clique na aba <code>File Editor</code> -&gt; <code>Dependencies</code> -&gt; <code>Add Dependency</code> e procure por <code>axios</code></p> <p>Importe o Axios para o componente onde executaremos nossa chamada API - <code>views/Pets.vue</code>. No bloco de script desse componente, adicione esta linha:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>Todas as nossas chamadas usarão a mesma URL de base com diferentes endpoints. Logo abaixo da importação para os axios, adicione o URL base às opções do Axios:</p> <div class="language-js extra-class"><pre class="language-js"><code>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">&quot;https://dog.ceo/api&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>Agora estamos prontos para fazer nossa primeira chamada de API.</p> <h2 id="chamando-a-api"><a href="#chamando-a-api" aria-hidden="true" class="header-anchor">#</a> Chamando a API</h2> <p>Vamos substituir a primeira imagem estática pela imagem aleatória de Husky da API Dog CEO. Primeiro temos que verificar qual endpoint nós temos que usar. Olhando para a documentação <a href="https://dog.ceo/dog-api/" target="_blank" rel="noopener noreferrer">da API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> podemos descobrir que precisamos acrescentar <code>/breed/husky/images/random</code> à chamada da API (a parte <code>api</code> já está na nossa URL base).</p> <p>Queremos que uma nova imagem substitua a antiga corretamente quando o componente é criado, então vamos adicionar um hook <code>created ()</code> logo após <code>data</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">💡</p> <p>Nota: Certifique-se de adicionar uma vírgula após o objeto de dados e, em seguida, adicione o <code>created ()</code>!</p></div> <div class="tip custom-block"><p class="custom-block-title">💡</p> <p>Este é o primeiro hook de lifecycle do nosso aplicativo! Estes são muito úteis quando você quer um bom controle sobre quando executar blocos de código. Leia mais <a href="https://vuejs.org/v2/guide/instance.html#Instance-Lifecycle-Hooks" target="_blank" rel="noopener noreferrer">aqui<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <p>Dentro do hook criado, adicionaremos nossa primeira consulta à API. Para executar uma requisição GET, o Axios usa o método <code>axios.get</code>. O resultado será uma promise de JavaScript, portanto, temos que fornecer retornos de sucesso e falha a ela. Por enquanto, vamos simplesmente imprimir o resultado da consulta no console. Edite <code>created () {}</code> colocando este trecho entre as chaves:</p> <div class="language-js extra-class"><pre class="language-js"><code>  axios
    <span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;/breed/husky/images/random&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>response <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Na visualização do navegador no Code Sandbox, vá para a guia Pets. Você deve ver um objeto no seu console. Dê uma olhada melhor clicando na seta à esquerda. Estamos interessadas ​​em seu campo <code>data</code>. Você pode ver que temos um status <code>success</code> e uma mensagem com um URL de imagem (você pode copiar/colar no seu navegador e descobrir um Husky bonito).</p> <h2 id="use-a-api-1-substitua-alguns-dos-dados-estaticos"><a href="#use-a-api-1-substitua-alguns-dos-dados-estaticos" aria-hidden="true" class="header-anchor">#</a> Use a API 1 - Substitua alguns dos dados estáticos</h2> <p>Vamos substituir nossa imagem Husky por essa nova. Primeiro, devemos encontrar um Husky em nosso array de cães com um método <code>Array.find</code>. Ele irá verificar os itens do array <code>dogs</code> (que já estamos carregando no componente pelo arquivo de dados <code>data/dogs.js</code>) um por um para encontrar o primeiro item correspondente aos critérios fornecidos. No nosso caso, o critério é uma &quot;raça&quot; igual a &quot;husky&quot;. Substitua o <code>console.log ()</code> dentro do callback <code>then</code> na chamada do Axios que acabamos de implementar por esta string:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> husky <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dogs<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>dog <span class="token operator">=&gt;</span> dog<span class="token punctuation">.</span>breed <span class="token operator">===</span> <span class="token string">'husky'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>husky<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Ok, nós encontramos um husky que você pode ver no <code>console.log ()</code>. Você também pode vê-lo na página &quot;Pets&quot; do seu aplicativo. Procure &quot;Max&quot;, listado como um husky. Agora vamos fornecer a ele uma nova imagem reatribuindo a URL da imagem dos dados estáticos pelos dados provenientes da API. Adicione esta linha abaixo do trecho que você acabou de adicionar.</p> <div class="language-js extra-class"><pre class="language-js"><code>husky<span class="token punctuation">.</span>img <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">;</span>
</code></pre></div><p>Você deve ver a imagem mudar para uma imagem aleatória de um husky extraída da API Dog CEO.</p> <h2 id="use-a-api-2-randomize-as-imagens"><a href="#use-a-api-2-randomize-as-imagens" aria-hidden="true" class="header-anchor">#</a> Use a API 2 - Randomize as Imagens</h2> <p>Vamos tentar carregar uma imagem aleatória para cada cachorro em nosso array <code>dogs</code>. A primeira coisa que precisamos é de um endpoint adequado para cada raça que temos. Vamos criar um array de links usando o método <code>.map</code>.</p> <p>::: dica 💡
O método <code>.map()</code> cria um novo array com os resultados de uma função, aplicada a cada elemento do array original.
:::</p> <p>Sobrescreva todo o código no <code>Created ()</code> criando esta constante de linksArray:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> linksArray <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dogs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
   dog <span class="token operator">=&gt;</span> <span class="token string">&quot;/breed/&quot;</span> <span class="token operator">+</span> dog<span class="token punctuation">.</span>breed <span class="token operator">+</span> <span class="token string">&quot;/images/random&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Estamos pegando a raça de cada cão no array e inserindo-o dentro da string do endpoint que iremos chamar (usamos o mesmo anteriormente para o husky, mas <code>breed</code> foi usado como um valor estático lá).</p> <p>Neste ponto, temos que executar várias chamadas de API usando todos os links que acabamos de criar - tantas chamadas de API quanto existem em nossos dados estáticos. O Axios tem uma função auxiliar para este caso chamada <code>axios.all</code> e <code>axios.spread</code>. Nós forneceremos uma série de nossos pedidos para <code>axios.all</code>, que retornará uma matriz de respostas e devemos usar o <code>axios.spread</code> para &quot;espalhar&quot; este array em múltiplos argumentos. Para criar uma matriz de consultas, usaremos um método <code>.map</code> em nosso <code>linksArray</code>, executando <code>axios.get</code> para cada link. Adicione este snippet diretamente abaixo do snippet linksArray adicionado pouco antes.</p> <div class="language-js extra-class"><pre class="language-js"><code>axios<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>linksArray<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>link <span class="token operator">=&gt;</span> axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
     axios<span class="token punctuation">.</span><span class="token function">spread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">...</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>dogs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dog<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         dog<span class="token punctuation">.</span>img <span class="token operator">=</span> res<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">💡</p> <p>O que esta acontecendo aqui? O método <code>forEach()</code> executa uma função fornecida uma vez para cada elemento do array em linksArray. Basicamente, ele passa pelos dados estáticos e adiciona uma das imagem aleatórias da API a <code>this.dogs</code>, assim que tivermos a resposta da nossa API. Então nós estamos substituindo cada imagem de cão qe temos originalmente por uma nova correspondente da API (<code>index</code> é o índice do elemento atual sendo processado no array, é o mesmo para os dois arrays porque os objetos de resposta são colocados na mesma ordem em que foram enviados).</p></div> <p>Agora temos novas imagens toda vez que nosso componente <code>Pets</code> é criado (você pode ver as imagens mudarem na atualização da página ou simplesmente mudando as abas de <code>pets</code> para <code>home</code> e vice-versa). Os nomes e raças dos cães ainda estão sendo extraídos de dados estáticos, mas as imagens são provenientes da API, combinadas com a raça do cão estático.</p> <p>O único problema remanescente é que ainda podemos ver as imagens antigas por um breve momento quando entramos na página Pets. Vamos limpar as imagens dos cachorros antes de realizarmos uma consulta. Adicione esta string como a primeira dentro do hook <code>created ()</code>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>dogs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>dog <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     dog<span class="token punctuation">.</span>img <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Agora, inicialmente, vemos retratos vazios de cachorros e, em seguida, as imagens são carregadas a partir da API. Progresso!</strong></p> <h1 id="resultado-final"><a href="#resultado-final" aria-hidden="true" class="header-anchor">#</a> Resultado final</h1> <p><img src="/docs/assets/img/petshop_chapter3.f1a4212c.jpg" alt="chapter 3 result"></p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/vuevixens/docs/edit/master/pt_br/workshop/ch3.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/docs/pt_br/workshop/ch2.html" class="prev">
          🐶 Capítulo 2: Construindo uma galeria de pets
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/docs/assets/js/14.8ed1301d.js" defer></script><script src="/docs/assets/js/app.d3db7bc6.js" defer></script>
  </body>
</html>
